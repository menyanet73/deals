# Deals

## Описание проекта

Deals - это Django приложение для обработки таблиц .csv со сделками и выдачи топ клиентов. 

## Стэк

* Python 3.10
* Django 4.2
* БД: PostgreSQL 14.7

## Установка

1. Склонируйте репозиторий:

```sh
git clone https://github.com/menyanet73/deals.git
```

2. Перейдите в директорию
```sh
cd deals
```

3. На данном этапе можете определить переменные в файле .env по примеру .env.example.
Обратите внимание на настройку CHECK_DUPLICATES, в техническом задании было условие:
```
Ранее загруженные версии файла deals.csv не должны влиять на
результат обработки новых.
```
По умолчанию настройка стоит False - т.е. каждый новый файл будет загружаться снова, не зависимо от уже загруженных данных.
Если же необходимо загружать только новые данные, стоит указать True, для проверки каждой сделки по совокупности всех полей на дубликаты.

Для простого запуска достаточно изменить имя файла .env.example
```sh
mv .env.example .env
```

4. Запустите docker compose
```sh
docker-compose up
```

## Использование

1. Добавление сделок
```sh
curl --location --request POST 'localhost/api/v1/deals/' \
--form 'deals=@"/path/to/file/deals.csv"'
```

2. Получение списка топ 5 клиентов
```sh
curl http://localhost/api/v1/deals/
```

## Документация

Документацию по API можно посмотреть на эндпоинте /swagger/. Для этого нужно запустить проект и перейти по адресу http://localhost/docs/swagger/. Также доступна документация на эндпоинте /docs/redoc/.

## Авторы 
Столбнев Максим - menyanet73@gmail.com